# 1. Calcular Q1, Q3 y el Rango Intercuartílico (IQR) para 'charges'
Q1 = df_final['charges'].quantile(0.25)
Q3 = df_final['charges'].quantile(0.75)
IQR = Q3 - Q1

# 2. Definir el límite superior para outliers (Q3 + 1.5 * IQR)
# Normalmente no filtramos outliers hacia abajo a menos que sean errores de data.
limite_superior = Q3 + 1.5 * IQR
print(f"Límite superior calculado para charges (Outliers): {limite_superior:.2f}")

# 3. Filtrar el dataset: mantener solo los registros donde charges es menor al límite superior
df_filtrado = df_final[df_final['charges'] <= limite_superior]

# 4. Verificar cuántas filas se eliminaron
filas_originales = len(df_final)
filas_nuevas = len(df_filtrado)
filas_eliminadas = filas_originales - filas_nuevas

print(f"Filas originales: {filas_originales}")
print(f"Filas después de filtrar: {filas_nuevas}")
print(f"Número de outliers extremos eliminados: {filas_eliminadas}")
